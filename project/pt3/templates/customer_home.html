{% extends "base.html" %}

{% block title %}Customer Dashboard - Air Ticket Reservation System{% endblock %}

{% block content %}
<div class="dashboard">
    <h2>Welcome, {{ session.name|e }}!</h2>
    
    <div class="dashboard-menu">
        <a href="{{ url_for('view_my_flights') }}" class="btn btn-primary">View My Flights</a>
        <a href="{{ url_for('search_flights') }}" class="btn btn-primary">Search Flights</a>
        <a href="{{ url_for('customer_reviews') }}" class="btn btn-primary">My Reviews</a>
    </div>
    
    <h3>My Upcoming Flights</h3>
    {% if flights %}
    <table class="flight-table">
        <thead>
            <tr>
                <th>Airline</th>
                <th>Flight #</th>
                <th>Route</th>
                <th>Departure</th>
                <th>Arrival</th>
                <th>Status</th>
                <th>Ticket ID</th>
            </tr>
        </thead>
        <tbody>
            {% for flight in flights %}
            <tr>
                <td>{{ flight.airline_name|e }}</td>
                <td>{{ flight.flight_number }}</td>
                <td>{{ flight.departure_airport|e }} ({{ flight.departure_city|e }}) â†’ {{ flight.arrival_airport|e }} ({{ flight.arrival_city|e }})</td>
                <td>{{ flight.departure_date }} {{ flight.departure_time }}</td>
                <td>{{ flight.arrival_date }} {{ flight.arrival_time }}</td>
                <td>
                    <span class="status status-{{ flight.status|e }}">{{ flight.status|e }}</span>
                </td>
                <td>{{ flight.ticket_id }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p>You have no upcoming flights. <a href="{{ url_for('search_flights') }}">Search for flights</a> to purchase tickets.</p>
    {% endif %}
</div>
{% endblock %}

